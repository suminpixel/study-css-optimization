{"version":3,"sources":["js/main.js"],"names":["yOffset","prevScrollHeight","currentScene","enterNewScene","acc","delayedYOffset","rafId","rafState","sceneInfo","type","heightNum","scrollHeight","objs","container","document","querySelector","messageA","messageB","messageC","messageD","canvas","context","getContext","videoImages","values","videoImageCount","imageSequence","canvas_opacity","start","end","messageA_opacity_in","messageB_opacity_in","messageC_opacity_in","messageD_opacity_in","messageA_translateY_in","messageB_translateY_in","messageC_translateY_in","messageD_translateY_in","messageA_opacity_out","messageB_opacity_out","messageC_opacity_out","messageD_opacity_out","messageA_translateY_out","messageB_translateY_out","messageC_translateY_out","messageD_translateY_out","pinB","pinC","canvas_opacity_in","canvas_opacity_out","pinB_scaleY","pinC_scaleY","canvasCaption","imagesPath","images","rect1X","rect2X","blendHeight","canvas_scale","canvasCaption_opacity","canvasCaption_translateY","rectStartY","setCanvasImages","imgElem","i","Image","src","push","imgElem2","imgElem3","length","checkMenu","body","classList","add","remove","setLayout","window","innerHeight","offsetHeight","style","height","pageYOffset","totalScrollHeight","setAttribute","heightRatio","transform","calcValues","currentYOffset","rv","scrollRatio","partScrollStart","partScrollEnd","partScrollHeight","playAnimation","opacity","widthRatio","innerWidth","width","canvasScaleRatio","fillStyle","drawImage","recalculatedInnerWidth","offsetWidth","recalculatedInnerHeight","whiteRectWidth","fillRect","parseInt","step","offsetTop","top","marginTop","scrollLoop","loop","sequence","Math","round","tempYOffset","scrollTo","requestAnimationFrame","abs","cancelAnimationFrame","addEventListener","tempScrollCount","siId","setInterval","clearInterval","setTimeout","e","removeChild","currentTarget"],"mappings":"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","file":"main.fb6bbcaf.js","sourceRoot":"..","sourcesContent":["(() => {\n\n\tlet yOffset = 0; // window.pageYOffset 대신 쓸 변수\n\tlet prevScrollHeight = 0; // 현재 스크롤 위치(yOffset)보다 이전에 위치한 스크롤 섹션들의 스크롤 높이값의 합\n\tlet currentScene = 0; // 현재 활성화된(눈 앞에 보고있는) 씬(scroll-section)\n\tlet enterNewScene = false; // 새로운 scene이 시작된 순간 true\n\tlet acc = 0.2;\n\tlet delayedYOffset = 0;\n\tlet rafId;\n\tlet rafState;\n\n\tconst sceneInfo = [\n\t\t{\n\t\t\t// 0\n\t\t\ttype: 'sticky',\n\t\t\theightNum: 5, // 브라우저 높이의 5배로 scrollHeight 세팅\n\t\t\tscrollHeight: 0,\n\t\t\tobjs: {\n\t\t\t\tcontainer: document.querySelector('#scroll-section-0'),\n\t\t\t\tmessageA: document.querySelector('#scroll-section-0 .main-message.a'),\n\t\t\t\tmessageB: document.querySelector('#scroll-section-0 .main-message.b'),\n\t\t\t\tmessageC: document.querySelector('#scroll-section-0 .main-message.c'),\n\t\t\t\tmessageD: document.querySelector('#scroll-section-0 .main-message.d'),\n\t\t\t\tcanvas: document.querySelector('#video-canvas-0'),\n\t\t\t\tcontext: document.querySelector('#video-canvas-0').getContext('2d'),\n\t\t\t\tvideoImages: []\n\t\t\t},\n\t\t\tvalues: {\n\t\t\t\tvideoImageCount: 300,\n\t\t\t\timageSequence: [0, 299],\n\t\t\t\tcanvas_opacity: [1, 0, { start: 0.9, end: 1 }],\n\t\t\t\tmessageA_opacity_in: [0, 1, { start: 0.1, end: 0.2 }],\n\t\t\t\tmessageB_opacity_in: [0, 1, { start: 0.3, end: 0.4 }],\n\t\t\t\tmessageC_opacity_in: [0, 1, { start: 0.5, end: 0.6 }],\n\t\t\t\tmessageD_opacity_in: [0, 1, { start: 0.7, end: 0.8 }],\n\t\t\t\tmessageA_translateY_in: [20, 0, { start: 0.1, end: 0.2 }],\n\t\t\t\tmessageB_translateY_in: [20, 0, { start: 0.3, end: 0.4 }],\n\t\t\t\tmessageC_translateY_in: [20, 0, { start: 0.5, end: 0.6 }],\n\t\t\t\tmessageD_translateY_in: [20, 0, { start: 0.7, end: 0.8 }],\n\t\t\t\tmessageA_opacity_out: [1, 0, { start: 0.25, end: 0.3 }],\n\t\t\t\tmessageB_opacity_out: [1, 0, { start: 0.45, end: 0.5 }],\n\t\t\t\tmessageC_opacity_out: [1, 0, { start: 0.65, end: 0.7 }],\n\t\t\t\tmessageD_opacity_out: [1, 0, { start: 0.85, end: 0.9 }],\n\t\t\t\tmessageA_translateY_out: [0, -20, { start: 0.25, end: 0.3 }],\n\t\t\t\tmessageB_translateY_out: [0, -20, { start: 0.45, end: 0.5 }],\n\t\t\t\tmessageC_translateY_out: [0, -20, { start: 0.65, end: 0.7 }],\n\t\t\t\tmessageD_translateY_out: [0, -20, { start: 0.85, end: 0.9 }]\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t// 1\n\t\t\ttype: 'normal',\n\t\t\t// heightNum: 5, // type normal에서는 필요 없음\n\t\t\tscrollHeight: 0,\n\t\t\tobjs: {\n\t\t\t\tcontainer: document.querySelector('#scroll-section-1')\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t// 2\n\t\t\ttype: 'sticky',\n\t\t\theightNum: 5,\n\t\t\tscrollHeight: 0,\n\t\t\tobjs: {\n\t\t\t\tcontainer: document.querySelector('#scroll-section-2'),\n\t\t\t\tmessageA: document.querySelector('#scroll-section-2 .a'),\n\t\t\t\tmessageB: document.querySelector('#scroll-section-2 .b'),\n\t\t\t\tmessageC: document.querySelector('#scroll-section-2 .c'),\n\t\t\t\tpinB: document.querySelector('#scroll-section-2 .b .pin'),\n\t\t\t\tpinC: document.querySelector('#scroll-section-2 .c .pin'),\n\t\t\t\tcanvas: document.querySelector('#video-canvas-1'),\n\t\t\t\tcontext: document.querySelector('#video-canvas-1').getContext('2d'),\n\t\t\t\tvideoImages: []\n\t\t\t},\n\t\t\tvalues: {\n\t\t\t\tvideoImageCount: 960,\n\t\t\t\timageSequence: [0, 959],\n\t\t\t\tcanvas_opacity_in: [0, 1, { start: 0, end: 0.1 }],\n\t\t\t\tcanvas_opacity_out: [1, 0, { start: 0.95, end: 1 }],\n\t\t\t\tmessageA_translateY_in: [20, 0, { start: 0.15, end: 0.2 }],\n\t\t\t\tmessageB_translateY_in: [30, 0, { start: 0.6, end: 0.65 }],\n\t\t\t\tmessageC_translateY_in: [30, 0, { start: 0.87, end: 0.92 }],\n\t\t\t\tmessageA_opacity_in: [0, 1, { start: 0.25, end: 0.3 }],\n\t\t\t\tmessageB_opacity_in: [0, 1, { start: 0.6, end: 0.65 }],\n\t\t\t\tmessageC_opacity_in: [0, 1, { start: 0.87, end: 0.92 }],\n\t\t\t\tmessageA_translateY_out: [0, -20, { start: 0.4, end: 0.45 }],\n\t\t\t\tmessageB_translateY_out: [0, -20, { start: 0.68, end: 0.73 }],\n\t\t\t\tmessageC_translateY_out: [0, -20, { start: 0.95, end: 1 }],\n\t\t\t\tmessageA_opacity_out: [1, 0, { start: 0.4, end: 0.45 }],\n\t\t\t\tmessageB_opacity_out: [1, 0, { start: 0.68, end: 0.73 }],\n\t\t\t\tmessageC_opacity_out: [1, 0, { start: 0.95, end: 1 }],\n\t\t\t\tpinB_scaleY: [0.5, 1, { start: 0.6, end: 0.65 }],\n\t\t\t\tpinC_scaleY: [0.5, 1, { start: 0.87, end: 0.92 }]\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t// 3\n\t\t\ttype: 'sticky',\n\t\t\theightNum: 5,\n\t\t\tscrollHeight: 0,\n\t\t\tobjs: {\n\t\t\t\tcontainer: document.querySelector('#scroll-section-3'),\n\t\t\t\tcanvasCaption: document.querySelector('.canvas-caption'),\n\t\t\t\tcanvas: document.querySelector('.image-blend-canvas'),\n\t\t\t\tcontext: document.querySelector('.image-blend-canvas').getContext('2d'),\n\t\t\t\timagesPath: [\n\t\t\t\t\t'./images/blend-image-1.jpg',\n\t\t\t\t\t'./images/blend-image-2.jpg'\n\t\t\t\t],\n\t\t\t\timages: []\n\t\t\t},\n\t\t\tvalues: {\n\t\t\t\trect1X: [ 0, 0, { start: 0, end: 0 } ],\n\t\t\t\trect2X: [ 0, 0, { start: 0, end: 0 } ],\n\t\t\t\tblendHeight: [ 0, 0, { start: 0, end: 0 } ],\n\t\t\t\tcanvas_scale: [ 0, 0, { start: 0, end: 0 } ],\n\t\t\t\tcanvasCaption_opacity: [ 0, 1, { start: 0, end: 0 } ],\n\t\t\t\tcanvasCaption_translateY: [ 20, 0, { start: 0, end: 0 } ],\n\t\t\t\trectStartY: 0\n\t\t\t}\n\t\t}\n\t];\n\n\tfunction setCanvasImages() {\n\t\tlet imgElem;\n\t\tfor (let i = 0; i < sceneInfo[0].values.videoImageCount; i++) {\n\t\t\timgElem = new Image();\n\t\t\timgElem.src = `./video/001/IMG_${6726 + i}.JPG`;\n\t\t\tsceneInfo[0].objs.videoImages.push(imgElem);\n\t\t}\n\n\t\tlet imgElem2;\n\t\tfor (let i = 0; i < sceneInfo[2].values.videoImageCount; i++) {\n\t\t\timgElem2 = new Image();\n\t\t\timgElem2.src = `./video/002/IMG_${7027 + i}.JPG`;\n\t\t\tsceneInfo[2].objs.videoImages.push(imgElem2);\n\t\t}\n\n\t\tlet imgElem3;\n\t\tfor (let i = 0; i < sceneInfo[3].objs.imagesPath.length; i++) {\n\t\t\timgElem3 = new Image();\n\t\t\timgElem3.src = sceneInfo[3].objs.imagesPath[i];\n\t\t\tsceneInfo[3].objs.images.push(imgElem3);\n\t\t}\n\t}\n\n\tfunction checkMenu() {\n\t\tif (yOffset > 44) {\n\t\t\tdocument.body.classList.add('local-nav-sticky');\n\t\t} else {\n\t\t\tdocument.body.classList.remove('local-nav-sticky');\n\t\t}\n\t}\n\n\tfunction setLayout() {\n\t\t// 각 스크롤 섹션의 높이 세팅\n\t\tfor (let i = 0; i < sceneInfo.length; i++) {\n\t\t\tif (sceneInfo[i].type === 'sticky') {\n\t\t\t\tsceneInfo[i].scrollHeight = sceneInfo[i].heightNum * window.innerHeight;\n\t\t\t} else if (sceneInfo[i].type === 'normal')  {\n                sceneInfo[i].scrollHeight = sceneInfo[i].objs.container.offsetHeight;\n\t\t\t}\n            sceneInfo[i].objs.container.style.height = `${sceneInfo[i].scrollHeight}px`;\n\t\t}\n\n\t\tyOffset = window.pageYOffset;\n\n\t\tlet totalScrollHeight = 0;\n\t\tfor (let i = 0; i < sceneInfo.length; i++) {\n\t\t\ttotalScrollHeight += sceneInfo[i].scrollHeight;\n\t\t\tif (totalScrollHeight >= yOffset) {\n\t\t\t\tcurrentScene = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tdocument.body.setAttribute('id', `show-scene-${currentScene}`);\n\n\t\tconst heightRatio = window.innerHeight / 1080;\n\t\tsceneInfo[0].objs.canvas.style.transform = `translate3d(-50%, -50%, 0) scale(${heightRatio})`;\n\t\tsceneInfo[2].objs.canvas.style.transform = `translate3d(-50%, -50%, 0) scale(${heightRatio})`;\n\t}\n\n\tfunction calcValues(values, currentYOffset) {\n\t\tlet rv;\n\t\t// 현재 씬(스크롤섹션)에서 스크롤된 범위를 비율로 구하기\n\t\tconst scrollHeight = sceneInfo[currentScene].scrollHeight;\n\t\tconst scrollRatio = currentYOffset / scrollHeight;\n\n\t\tif (values.length === 3) {\n\t\t\t// start ~ end 사이에 애니메이션 실행\n\t\t\tconst partScrollStart = values[2].start * scrollHeight;\n\t\t\tconst partScrollEnd = values[2].end * scrollHeight;\n\t\t\tconst partScrollHeight = partScrollEnd - partScrollStart;\n\n\t\t\tif (currentYOffset >= partScrollStart && currentYOffset <= partScrollEnd) {\n\t\t\t\trv = (currentYOffset - partScrollStart) / partScrollHeight * (values[1] - values[0]) + values[0];\n\t\t\t} else if (currentYOffset < partScrollStart) {\n\t\t\t\trv = values[0];\n\t\t\t} else if (currentYOffset > partScrollEnd) {\n\t\t\t\trv = values[1];\n\t\t\t}\n\t\t} else {\n\t\t\trv = scrollRatio * (values[1] - values[0]) + values[0];\n\t\t}\n\n\t\treturn rv;\n\t}\n\n\tfunction playAnimation() {\n\t\tconst objs = sceneInfo[currentScene].objs;\n\t\tconst values = sceneInfo[currentScene].values;\n\t\tconst currentYOffset = yOffset - prevScrollHeight;\n\t\tconst scrollHeight = sceneInfo[currentScene].scrollHeight;\n\t\tconst scrollRatio = currentYOffset / scrollHeight;\n\n\t\tswitch (currentScene) {\n\t\t\tcase 0:\n\t\t\t\t// console.log('0 play');\n\t\t\t\t// let sequence = Math.round(calcValues(values.imageSequence, currentYOffset));\n\t\t\t\t// objs.context.drawImage(objs.videoImages[sequence], 0, 0);\n\t\t\t\tobjs.canvas.style.opacity = calcValues(values.canvas_opacity, currentYOffset);\n\n\t\t\t\tif (scrollRatio <= 0.22) {\n\t\t\t\t\t// in\n\t\t\t\t\tobjs.messageA.style.opacity = calcValues(values.messageA_opacity_in, currentYOffset);\n\t\t\t\t\tobjs.messageA.style.transform = `translate3d(0, ${calcValues(values.messageA_translateY_in, currentYOffset)}%, 0)`;\n\t\t\t\t} else {\n\t\t\t\t\t// out\n\t\t\t\t\tobjs.messageA.style.opacity = calcValues(values.messageA_opacity_out, currentYOffset);\n\t\t\t\t\tobjs.messageA.style.transform = `translate3d(0, ${calcValues(values.messageA_translateY_out, currentYOffset)}%, 0)`;\n\t\t\t\t}\n\n\t\t\t\tif (scrollRatio <= 0.42) {\n\t\t\t\t\t// in\n\t\t\t\t\tobjs.messageB.style.opacity = calcValues(values.messageB_opacity_in, currentYOffset);\n\t\t\t\t\tobjs.messageB.style.transform = `translate3d(0, ${calcValues(values.messageB_translateY_in, currentYOffset)}%, 0)`;\n\t\t\t\t} else {\n\t\t\t\t\t// out\n\t\t\t\t\tobjs.messageB.style.opacity = calcValues(values.messageB_opacity_out, currentYOffset);\n\t\t\t\t\tobjs.messageB.style.transform = `translate3d(0, ${calcValues(values.messageB_translateY_out, currentYOffset)}%, 0)`;\n\t\t\t\t}\n\n\t\t\t\tif (scrollRatio <= 0.62) {\n\t\t\t\t\t// in\n\t\t\t\t\tobjs.messageC.style.opacity = calcValues(values.messageC_opacity_in, currentYOffset);\n\t\t\t\t\tobjs.messageC.style.transform = `translate3d(0, ${calcValues(values.messageC_translateY_in, currentYOffset)}%, 0)`;\n\t\t\t\t} else {\n\t\t\t\t\t// out\n\t\t\t\t\tobjs.messageC.style.opacity = calcValues(values.messageC_opacity_out, currentYOffset);\n\t\t\t\t\tobjs.messageC.style.transform = `translate3d(0, ${calcValues(values.messageC_translateY_out, currentYOffset)}%, 0)`;\n\t\t\t\t}\n\n\t\t\t\tif (scrollRatio <= 0.82) {\n\t\t\t\t\t// in\n\t\t\t\t\tobjs.messageD.style.opacity = calcValues(values.messageD_opacity_in, currentYOffset);\n\t\t\t\t\tobjs.messageD.style.transform = `translate3d(0, ${calcValues(values.messageD_translateY_in, currentYOffset)}%, 0)`;\n\t\t\t\t} else {\n\t\t\t\t\t// out\n\t\t\t\t\tobjs.messageD.style.opacity = calcValues(values.messageD_opacity_out, currentYOffset);\n\t\t\t\t\tobjs.messageD.style.transform = `translate3d(0, ${calcValues(values.messageD_translateY_out, currentYOffset)}%, 0)`;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t// console.log('2 play');\n\t\t\t\t// let sequence2 = Math.round(calcValues(values.imageSequence, currentYOffset));\n\t\t\t\t// objs.context.drawImage(objs.videoImages[sequence2], 0, 0);\n\n\t\t\t\tif (scrollRatio <= 0.5) {\n\t\t\t\t\t// in\n\t\t\t\t\tobjs.canvas.style.opacity = calcValues(values.canvas_opacity_in, currentYOffset);\n\t\t\t\t} else {\n\t\t\t\t\t// out\n\t\t\t\t\tobjs.canvas.style.opacity = calcValues(values.canvas_opacity_out, currentYOffset);\n\t\t\t\t}\n\n\t\t\t\tif (scrollRatio <= 0.32) {\n\t\t\t\t\t// in\n\t\t\t\t\tobjs.messageA.style.opacity = calcValues(values.messageA_opacity_in, currentYOffset);\n\t\t\t\t\tobjs.messageA.style.transform = `translate3d(0, ${calcValues(values.messageA_translateY_in, currentYOffset)}%, 0)`;\n\t\t\t\t} else {\n\t\t\t\t\t// out\n\t\t\t\t\tobjs.messageA.style.opacity = calcValues(values.messageA_opacity_out, currentYOffset);\n\t\t\t\t\tobjs.messageA.style.transform = `translate3d(0, ${calcValues(values.messageA_translateY_out, currentYOffset)}%, 0)`;\n\t\t\t\t}\n\n\t\t\t\tif (scrollRatio <= 0.67) {\n\t\t\t\t\t// in\n\t\t\t\t\tobjs.messageB.style.transform = `translate3d(0, ${calcValues(values.messageB_translateY_in, currentYOffset)}%, 0)`;\n\t\t\t\t\tobjs.messageB.style.opacity = calcValues(values.messageB_opacity_in, currentYOffset);\n\t\t\t\t\tobjs.pinB.style.transform = `scaleY(${calcValues(values.pinB_scaleY, currentYOffset)})`;\n\t\t\t\t} else {\n\t\t\t\t\t// out\n\t\t\t\t\tobjs.messageB.style.transform = `translate3d(0, ${calcValues(values.messageB_translateY_out, currentYOffset)}%, 0)`;\n\t\t\t\t\tobjs.messageB.style.opacity = calcValues(values.messageB_opacity_out, currentYOffset);\n\t\t\t\t\tobjs.pinB.style.transform = `scaleY(${calcValues(values.pinB_scaleY, currentYOffset)})`;\n\t\t\t\t}\n\n\t\t\t\tif (scrollRatio <= 0.93) {\n\t\t\t\t\t// in\n\t\t\t\t\tobjs.messageC.style.transform = `translate3d(0, ${calcValues(values.messageC_translateY_in, currentYOffset)}%, 0)`;\n\t\t\t\t\tobjs.messageC.style.opacity = calcValues(values.messageC_opacity_in, currentYOffset);\n\t\t\t\t\tobjs.pinC.style.transform = `scaleY(${calcValues(values.pinC_scaleY, currentYOffset)})`;\n\t\t\t\t} else {\n\t\t\t\t\t// out\n\t\t\t\t\tobjs.messageC.style.transform = `translate3d(0, ${calcValues(values.messageC_translateY_out, currentYOffset)}%, 0)`;\n\t\t\t\t\tobjs.messageC.style.opacity = calcValues(values.messageC_opacity_out, currentYOffset);\n\t\t\t\t\tobjs.pinC.style.transform = `scaleY(${calcValues(values.pinC_scaleY, currentYOffset)})`;\n\t\t\t\t}\n\n\t\t\t\t// currentScene 3에서 쓰는 캔버스를 미리 그려주기 시작\n\t\t\t\tif (scrollRatio > 0.9) {\n\t\t\t\t\tconst objs = sceneInfo[3].objs;\n\t\t\t\t\tconst values = sceneInfo[3].values;\n\t\t\t\t\tconst widthRatio = window.innerWidth / objs.canvas.width;\n\t\t\t\t\tconst heightRatio = window.innerHeight / objs.canvas.height;\n\t\t\t\t\tlet canvasScaleRatio;\n\n\t\t\t\t\tif (widthRatio <= heightRatio) {\n\t\t\t\t\t\t// 캔버스보다 브라우저 창이 홀쭉한 경우\n\t\t\t\t\t\tcanvasScaleRatio = heightRatio;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 캔버스보다 브라우저 창이 납작한 경우\n\t\t\t\t\t\tcanvasScaleRatio = widthRatio;\n\t\t\t\t\t}\n\n\t\t\t\t\tobjs.canvas.style.transform = `scale(${canvasScaleRatio})`;\n\t\t\t\t\tobjs.context.fillStyle = 'white';\n\t\t\t\t\tobjs.context.drawImage(objs.images[0], 0, 0);\n\n\t\t\t\t\t// 캔버스 사이즈에 맞춰 가정한 innerWidth와 innerHeight\n\t\t\t\t\tconst recalculatedInnerWidth = document.body.offsetWidth / canvasScaleRatio;\n\t\t\t\t\tconst recalculatedInnerHeight = window.innerHeight / canvasScaleRatio;\n\n\t\t\t\t\tconst whiteRectWidth = recalculatedInnerWidth * 0.15;\n\t\t\t\t\tvalues.rect1X[0] = (objs.canvas.width - recalculatedInnerWidth) / 2;\n\t\t\t\t\tvalues.rect1X[1] = values.rect1X[0] - whiteRectWidth;\n\t\t\t\t\tvalues.rect2X[0] = values.rect1X[0] + recalculatedInnerWidth - whiteRectWidth;\n\t\t\t\t\tvalues.rect2X[1] = values.rect2X[0] + whiteRectWidth;\n\n\t\t\t\t\t// 좌우 흰색 박스 그리기\n\t\t\t\t\tobjs.context.fillRect(\n\t\t\t\t\t\tparseInt(values.rect1X[0]),\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tparseInt(whiteRectWidth),\n\t\t\t\t\t\tobjs.canvas.height\n\t\t\t\t\t);\n\t\t\t\t\tobjs.context.fillRect(\n\t\t\t\t\t\tparseInt(values.rect2X[0]),\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tparseInt(whiteRectWidth),\n\t\t\t\t\t\tobjs.canvas.height\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\t// console.log('3 play');\n\t\t\t\tlet step = 0;\n\t\t\t\t// 가로/세로 모두 꽉 차게 하기 위해 여기서 세팅(계산 필요)\n\t\t\t\tconst widthRatio = window.innerWidth / objs.canvas.width;\n\t\t\t\tconst heightRatio = window.innerHeight / objs.canvas.height;\n\t\t\t\tlet canvasScaleRatio;\n\n\t\t\t\tif (widthRatio <= heightRatio) {\n\t\t\t\t\t// 캔버스보다 브라우저 창이 홀쭉한 경우\n\t\t\t\t\tcanvasScaleRatio = heightRatio;\n\t\t\t\t} else {\n\t\t\t\t\t// 캔버스보다 브라우저 창이 납작한 경우\n\t\t\t\t\tcanvasScaleRatio = widthRatio;\n\t\t\t\t}\n\n\t\t\t\tobjs.canvas.style.transform = `scale(${canvasScaleRatio})`;\n\t\t\t\tobjs.context.fillStyle = 'white';\n\t\t\t\tobjs.context.drawImage(objs.images[0], 0, 0);\n\n\t\t\t\t// 캔버스 사이즈에 맞춰 가정한 innerWidth와 innerHeight\n\t\t\t\tconst recalculatedInnerWidth = document.body.offsetWidth / canvasScaleRatio;\n\t\t\t\tconst recalculatedInnerHeight = window.innerHeight / canvasScaleRatio;\n\n\t\t\t\tif (!values.rectStartY) {\n\t\t\t\t\t// values.rectStartY = objs.canvas.getBoundingClientRect().top;\n\t\t\t\t\tvalues.rectStartY = objs.canvas.offsetTop + (objs.canvas.height - objs.canvas.height * canvasScaleRatio) / 2;\n\t\t\t\t\tvalues.rect1X[2].start = (window.innerHeight / 2) / scrollHeight;\n\t\t\t\t\tvalues.rect2X[2].start = (window.innerHeight / 2) / scrollHeight;\n\t\t\t\t\tvalues.rect1X[2].end = values.rectStartY / scrollHeight;\n\t\t\t\t\tvalues.rect2X[2].end = values.rectStartY / scrollHeight;\n\t\t\t\t}\n\n\t\t\t\tconst whiteRectWidth = recalculatedInnerWidth * 0.15;\n\t\t\t\tvalues.rect1X[0] = (objs.canvas.width - recalculatedInnerWidth) / 2;\n\t\t\t\tvalues.rect1X[1] = values.rect1X[0] - whiteRectWidth;\n\t\t\t\tvalues.rect2X[0] = values.rect1X[0] + recalculatedInnerWidth - whiteRectWidth;\n\t\t\t\tvalues.rect2X[1] = values.rect2X[0] + whiteRectWidth;\n\n\t\t\t\t// 좌우 흰색 박스 그리기\n\t\t\t\tobjs.context.fillRect(\n\t\t\t\t\tparseInt(calcValues(values.rect1X, currentYOffset)),\n\t\t\t\t\t0,\n\t\t\t\t\tparseInt(whiteRectWidth),\n\t\t\t\t\tobjs.canvas.height\n\t\t\t\t);\n\t\t\t\tobjs.context.fillRect(\n\t\t\t\t\tparseInt(calcValues(values.rect2X, currentYOffset)),\n\t\t\t\t\t0,\n\t\t\t\t\tparseInt(whiteRectWidth),\n\t\t\t\t\tobjs.canvas.height\n\t\t\t\t);\n\n\t\t\t\tif (scrollRatio < values.rect1X[2].end) {\n\t\t\t\t\tstep = 1;\n\t\t\t\t\t// console.log('캔버스 닿기 전');\n\t\t\t\t\tobjs.canvas.classList.remove('sticky');\n\t\t\t\t} else {\n\t\t\t\t\tstep = 2;\n\t\t\t\t\t// console.log('캔버스 닿은 후');\n\t\t\t\t\t// 이미지 블렌드\n\t\t\t\t\t// values.blendHeight: [ 0, 0, { start: 0, end: 0 } ]\n\t\t\t\t\tvalues.blendHeight[0] = 0;\n\t\t\t\t\tvalues.blendHeight[1] = objs.canvas.height;\n\t\t\t\t\tvalues.blendHeight[2].start = values.rect1X[2].end;\n\t\t\t\t\tvalues.blendHeight[2].end = values.blendHeight[2].start + 0.2;\n\t\t\t\t\tconst blendHeight = calcValues(values.blendHeight, currentYOffset);\n\n\t\t\t\t\tobjs.context.drawImage(objs.images[1],\n\t\t\t\t\t\t0, objs.canvas.height - blendHeight, objs.canvas.width, blendHeight,\n\t\t\t\t\t\t0, objs.canvas.height - blendHeight, objs.canvas.width, blendHeight\n\t\t\t\t\t);\n\n\t\t\t\t\tobjs.canvas.classList.add('sticky');\n\t\t\t\t\tobjs.canvas.style.top = `${-(objs.canvas.height - objs.canvas.height * canvasScaleRatio) / 2}px`;\n\n\t\t\t\t\tif (scrollRatio > values.blendHeight[2].end) {\n\t\t\t\t\t\tvalues.canvas_scale[0] = canvasScaleRatio;\n\t\t\t\t\t\tvalues.canvas_scale[1] = document.body.offsetWidth / (1.5 * objs.canvas.width);\n\t\t\t\t\t\tvalues.canvas_scale[2].start = values.blendHeight[2].end;\n\t\t\t\t\t\tvalues.canvas_scale[2].end = values.canvas_scale[2].start + 0.2;\n\n\t\t\t\t\t\tobjs.canvas.style.transform = `scale(${calcValues(values.canvas_scale, currentYOffset)})`;\n\t\t\t\t\t\tobjs.canvas.style.marginTop = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (scrollRatio > values.canvas_scale[2].end\n\t\t\t\t\t\t&& values.canvas_scale[2].end > 0) {\n\t\t\t\t\t\tobjs.canvas.classList.remove('sticky');\n\t\t\t\t\t\tobjs.canvas.style.marginTop = `${scrollHeight * 0.4}px`;\n\n\t\t\t\t\t\tvalues.canvasCaption_opacity[2].start = values.canvas_scale[2].end;\n\t\t\t\t\t\tvalues.canvasCaption_opacity[2].end = values.canvasCaption_opacity[2].start + 0.1;\n\t\t\t\t\t\tvalues.canvasCaption_translateY[2].start = values.canvasCaption_opacity[2].start;\n\t\t\t\t\t\tvalues.canvasCaption_translateY[2].end = values.canvasCaption_opacity[2].end;\n\t\t\t\t\t\tobjs.canvasCaption.style.opacity = calcValues(values.canvasCaption_opacity, currentYOffset);\n\t\t\t\t\t\tobjs.canvasCaption.style.transform = `translate3d(0, ${calcValues(values.canvasCaption_translateY, currentYOffset)}%, 0)`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tfunction scrollLoop() {\n\t\tenterNewScene = false;\n\t\tprevScrollHeight = 0;\n\n\t\tfor (let i = 0; i < currentScene; i++) {\n\t\t\tprevScrollHeight += sceneInfo[i].scrollHeight;\n\t\t}\n\n\t\tif (delayedYOffset > prevScrollHeight + sceneInfo[currentScene].scrollHeight) {\n\t\t\tenterNewScene = true;\n\t\t\tif (currentScene < sceneInfo.length - 1) {\n\t\t\t\tcurrentScene++;\n\t\t\t}\n\t\t\tdocument.body.setAttribute('id', `show-scene-${currentScene}`);\n\t\t}\n\n\t\tif (delayedYOffset < prevScrollHeight) {\n\t\t\tenterNewScene = true;\n\t\t\t// 브라우저 바운스 효과로 인해 마이너스가 되는 것을 방지(모바일)\n\t\t\tif (currentScene === 0) return;\n\t\t\tcurrentScene--;\n\t\t\tdocument.body.setAttribute('id', `show-scene-${currentScene}`);\n\t\t}\n\n\t\tif (enterNewScene) return;\n\n\t\tplayAnimation();\n\t}\n\n\tfunction loop() {\n\t\tdelayedYOffset = delayedYOffset + (yOffset - delayedYOffset) * acc;\n\n\t\tif (!enterNewScene) {\n\t\t\tif (currentScene === 0 || currentScene === 2) {\n\t\t\t\tconst currentYOffset = delayedYOffset - prevScrollHeight;\n\t\t\t\tconst objs = sceneInfo[currentScene].objs;\n\t\t\t\tconst values = sceneInfo[currentScene].values;\n\t\t\t\tlet sequence = Math.round(calcValues(values.imageSequence, currentYOffset));\n\t\t\t\tif (objs.videoImages[sequence]) {\n\t\t\t\t\tobjs.context.drawImage(objs.videoImages[sequence], 0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n        // 일부 기기에서 페이지 끝으로 고속 이동하면 body id가 제대로 인식 안되는 경우를 해결\n        // 페이지 맨 위로 갈 경우: scrollLoop와 첫 scene의 기본 캔버스 그리기 수행\n        if (delayedYOffset < 1) {\n            scrollLoop();\n            sceneInfo[0].objs.canvas.style.opacity = 1;\n            sceneInfo[0].objs.context.drawImage(sceneInfo[0].objs.videoImages[0], 0, 0);\n        }\n        // 페이지 맨 아래로 갈 경우: 마지막 섹션은 스크롤 계산으로 위치 및 크기를 결정해야할 요소들이 많아서 1픽셀을 움직여주는 것으로 해결\n        if ((document.body.offsetHeight - window.innerHeight) - delayedYOffset < 1) {\n            let tempYOffset = yOffset;\n            scrollTo(0, tempYOffset - 1);\n        }\n\n\t\trafId = requestAnimationFrame(loop);\n\n\t\tif (Math.abs(yOffset - delayedYOffset) < 1) {\n\t\t\tcancelAnimationFrame(rafId);\n\t\t\trafState = false;\n\t\t}\n\t}\n\n\twindow.addEventListener('load', () => {\n        document.body.classList.remove('before-load');\n        setLayout();\n        sceneInfo[0].objs.context.drawImage(sceneInfo[0].objs.videoImages[0], 0, 0);\n\n\t\t// 중간에서 새로고침 했을 경우 자동 스크롤로 제대로 그려주기\n        let tempYOffset = yOffset;\n        let tempScrollCount = 0;\n        if (tempYOffset > 0) {\n            let siId = setInterval(() => {\n                scrollTo(0, tempYOffset);\n                tempYOffset += 5;\n\n                if (tempScrollCount > 20) {\n                    clearInterval(siId);\n                }\n                tempScrollCount++;\n            }, 20);\n        }\n\n        window.addEventListener('scroll', () => {\n            yOffset = window.pageYOffset;\n            scrollLoop();\n  \t\t\tcheckMenu();\n\n  \t\t\tif (!rafState) {\n  \t\t\t\trafId = requestAnimationFrame(loop);\n  \t\t\t\trafState = true;\n  \t\t\t}\n  \t\t});\n\n  \t\twindow.addEventListener('resize', () => {\n  \t\t\tif (window.innerWidth > 900) {\n  \t\t\t\tsetLayout();\n  \t\t\t\tsceneInfo[3].values.rectStartY = 0;  \n\t\t\t}\n\n\t\t\t// Scene 3의 요소들은 위치나 크기가 미리 정해지지 않고\n\t\t\t// 현재 창 사이즈나 스크롤 위치에 따라 가변적으로 변하기 때문에\n\t\t\t// 리사이즈에 일일이 대응시키기가 까다롭습니다.\n\t\t\t// Scene 3에 진입 시점에 요소들의 위치와 크기가 결정이 되는 특징을 이용해서\n\t\t\t// 현재 Scene이 3일 경우에는 좀 위로 스크롤이 되도록 해서\n\t\t\t// Scene 3의 시작 지점 이전으로 돌리는 식으로 요소들의 레이아웃이 깨지는 현상을 방지해 줍니다.\n\t\t\tif (currentScene === 3 && window.innerWidth > 450) {\n\t\t\t\tlet tempYOffset = yOffset;\n\t\t\t\tlet tempScrollCount = 0;\n\t\t\t\tif (tempYOffset > 0) {\n\t\t\t\t\tlet siId = setInterval(() => {\n\t\t\t\t\t\tscrollTo(0, tempYOffset);\n\t\t\t\t\t\ttempYOffset -= 50;\n\n\t\t\t\t\t\tif (tempScrollCount > 20) {\n\t\t\t\t\t\t\tclearInterval(siId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttempScrollCount++;\n\t\t\t\t\t}, 20);\n\t\t\t\t}\n\t\t\t}\n  \t\t});\n\n  \t\twindow.addEventListener('orientationchange', () => {\n  \t\t\tsetTimeout(setLayout, 500);\n  \t\t});\n\n  \t\tdocument.querySelector('.loading').addEventListener('transitionend', (e) => {\n  \t\t\tdocument.body.removeChild(e.currentTarget);\n  \t\t});\n\n\t});\n\n\tsetCanvasImages();\n\n})();\n"]}